<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TORFL 2 AI Tutor</title>
    <!-- 2026년형 러시아어 폰트 & 아이콘 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- 아이콘 (Lucide or FontAwesome) -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

    <!-- 배경 효과 -->
    <div class="background-glow"></div>

    <!-- 메인 컨테이너 -->
    <main class="container">
        <!-- 상단: 상태 및 설정 -->
        <header>
            <div class="status-pill">
                <span class="dot"></span> <span id="connection-status">Disconnected</span>
            </div>
            <button id="settings-btn" class="icon-btn"><i data-lucide="settings"></i></button>
        </header>

        <!-- 중앙: AI Orb (Canvas로 파형 그리기) -->
        <div class="orb-container">
            <canvas id="orb-canvas"></canvas>
            <div class="orb-glow"></div>
        </div>

        <!-- 대화 내용 (말하면 자막처럼 뜸, 채팅치면 위로 올라감) -->
        <div id="chat-scroller" class="chat-scroller">
            <!-- 메시지들이 여기에 동적으로 추가됨 -->
            <div class="message ai-message">
                안녕하세요, Andrey. 토르플 2급 준비를 시작할까요?
            </div>
        </div>

        <!-- 하단: 입력 컨트롤 -->
        <div class="input-area">
            <button id="vocab-btn" class="icon-btn sub-btn"><i data-lucide="book"></i></button>
            
            <div class="text-input-wrapper">
                <input type="text" id="text-input" placeholder="러시아어로 대화하기..." autocomplete="off">
            </div>

            <!-- 마이크 버튼 (핵심) -->
            <button id="mic-btn" class="mic-btn">
                <i data-lucide="mic"></i>
            </button>
        </div>
    </main>

    <!-- 설정 모달 (API 키 입력) -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Settings</h3>
            <label>OpenAI API Key</label>
            <input type="password" id="api-key-input" placeholder="sk-...">
            <label>System Prompt (Persona)</label>
            <textarea id="system-prompt">당신은 엄격하지만 친절한 러시아어 토르플 2급(TORFL-2) 시험관입니다. 문법 오류(특히 격변화, 형동사)를 즉시 교정해주고, 고급 어휘를 제안하세요.</textarea>
            <button id="save-settings">Save & Connect</button>
        </div>
    </div>

    <!-- 스크립트 로드 -->
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
    <script>
        lucide.createIcons(); // 아이콘 렌더링
    </script>
</body>
</html>

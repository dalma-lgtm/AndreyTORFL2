<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TORFL 2 AI Tutor</title>
    <!-- 폰트 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- 아이콘 -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

    <div class="background-glow"></div>

    <main class="container">
        <!-- 상단 -->
        <header>
            <div class="status-pill">
                <span class="dot" id="status-dot"></span> 
                <span id="connection-status">Disconnected</span>
            </div>
            <button id="settings-btn" class="icon-btn"><i data-lucide="settings"></i></button>
        </header>

        <!-- 중앙 Orb -->
        <div class="orb-container">
            <canvas id="orb-canvas"></canvas>
        </div>

        <!-- 채팅 -->
        <div id="chat-scroller" class="chat-scroller">
            <div class="message ai-message">
                Привет! 준비되셨나요? API 키를 설정해주세요.
            </div>
        </div>

        <!-- 하단 입력 -->
        <div class="input-area">
            <button id="vocab-btn" class="icon-btn sub-btn"><i data-lucide="book"></i></button>
            <div class="text-input-wrapper">
                <input type="text" id="text-input" placeholder="러시아어로 입력..." autocomplete="off">
            </div>
            <button id="mic-btn" class="mic-btn">
                <i data-lucide="mic"></i>
            </button>
        </div>
    </main>

    <!-- 설정 모달 -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <h3>설정 (Settings)</h3>
            <p style="font-size: 0.8rem; color: #aaa; margin-bottom: 10px;">OpenAI API Key를 입력해야 작동합니다.</p>
            <label>API Key</label>
            <input type="password" id="api-key-input" placeholder="sk-...">
            
            <label>System Prompt</label>
            <textarea id="system-prompt" rows="4">당신은 엄격한 러시아어 토르플 2급 시험관입니다. 문법 오류를 지적하고 고급 어휘를 가르쳐주세요.</textarea>
            
            <button id="save-settings">저장 및 연결</button>
            <button id="close-settings" style="background: transparent; border: 1px solid #555; margin-top: 10px;">닫기</button>
        </div>
    </div>

    <!-- 스크립트: 순서 중요 -->
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
    <script>
        // 아이콘 렌더링 강제 실행
        window.addEventListener('DOMContentLoaded', () => {
            if (window.lucide) {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>
